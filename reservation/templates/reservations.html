{% extends 'base.html' %}
{% load static %}
{% get_media_prefix as MEDIA_URL %}

{% block extraCSS %}
    <link rel="stylesheet" href="{% static 'css/reservations.css' %}">
{% endblock %}
{% block content %}
    <div class="reservations-container">
        {% for reservation, facility, slot, review_pending_users in reservation_data %}
            <div data-reservation_pk='{{ reservation.pk }}' class="reservation-item
                    {% if reservation.status == 'active' %}active
                    {% elif reservation.status == 'payment' %}payment-pending
                    {% elif reservation.status == 'timeout' %}payment-timeout
                    {% elif reservation.status == 'on_hold' %}on-hold
                    {% elif reservation.status == 'review' %}completed
                    {% elif reservation.status == 'past' %}completed
                    {% elif reservation.status == 'cancelled' %}cancelled
                    {% endif %}
">
                <div class="left-content">
                    <img src="{{ facility.picture.url }}" alt="Field Image" class="field-image">
                    <h3>{{ facility.name }}</h3>
                    <div class="separator"></div>
                    <h3>{{ slot }}</h3>
                    <div class="separator"></div>
                    <h3>{{ reservation.belonged_team.name }}</h3>
                </div>
                {% if reservation.status == 'active' %}
                    <button class="cancel-button">İptal Talebi</button>
                {% elif reservation.status == 'payment' %}
                {% elif reservation.status == 'timeout' %}
                {% elif reservation.status == 'on_hold' %}
                {% elif reservation.status == 'past' %}
                    {% if review_pending_users|length != 0 %}
                        <button class="action-button" onclick="toggleStaffEvaluation(this)">Kadroyu Değerlendir</button>
                    {% endif %}
                {% elif reservation.status == 'cancelled' %}
                {% endif %}
            </div>
        {% endfor %}
    </div>

    <!-- Staff Evaluation Popup -->
    <div class="staff-eval-popup" id="staffEvalPopup">
        <div class="staff-eval-content">
            <button class="staff-eval-close" onclick="toggleStaffEvaluation()">×</button>

            <!-- Üst Kısım - Oyuncular Listesi -->
            <div class="staff-eval-players-section">
                <h2>Oyuncular</h2>
                <div class="staff-eval-players-grid">

                </div>
            </div>

            <!-- Alt Kısım - Oyuncu Detayları -->
            <div class="staff-eval-details-section">
                <!-- Sol Kısım - Oyuncu Fotoğrafı -->
                <div class="staff-eval-image-section">
                    <h3>Oyuncu Seçin</h3>
                    <img src="\{{ MEDIA_URL }}media\app_user_profile_pics\Default User Profile Male.png"
                         alt="Oyuncu Seçin">
                    <h4>--</h4>
                </div>

                <!-- Sağ Kısım - Oyuncu İstatistikleri -->
                <div class="staff-eval-stats-section">
                    <div class="staff-eval-stat-item">
                        <div class="staff-eval-stat-title">Hız</div>
                        <div class="staff-eval-stat-value speed-stat">85</div>
                        <div class="staff-eval-stat-subtitle">
                            <div class="staff-eval-sub-stats">
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Hızlanma</span>
                                    <input id="accelerationInput" type="range"
                                           class="staff-eval-stat-slider speed-input" min="0" max="100"
                                           value="84">
                                    <span class="staff-eval-slider-value">84</span>
                                </div>
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Sprint Hızı</span>
                                    <input id="sprintSpeedInput" type="range" class="staff-eval-stat-slider speed-input"
                                           min="0" max="100"
                                           value="86">
                                    <span class="staff-eval-slider-value">86</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="staff-eval-stat-item">
                        <div class="staff-eval-stat-title">Şut</div>
                        <div class="staff-eval-stat-value shooting-stat">78</div>
                        <div class="staff-eval-stat-subtitle">
                            <div class="staff-eval-sub-stats">
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Atak Pozisyonu</span>
                                    <input id="shootingPositionInput" type="range"
                                           class="staff-eval-stat-slider shooting-input" min="0" max="100"
                                           value="76">
                                    <span class="staff-eval-slider-value">76</span>
                                </div>
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Bitiricilik</span>
                                    <input id="finishingInput" type="range"
                                           class="staff-eval-stat-slider shooting-input" min="0" max="100"
                                           value="80">
                                    <span class="staff-eval-slider-value">80</span>
                                </div>
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Şut Gücü</span>
                                    <input id="shotPowerInput" type="range"
                                           class="staff-eval-stat-slider shooting-input" min="0" max="100"
                                           value="82">
                                    <span class="staff-eval-slider-value">82</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="staff-eval-stat-item">
                        <div class="staff-eval-stat-title">Pas</div>
                        <div class="staff-eval-stat-value passing-stat">82</div>
                        <div class="staff-eval-stat-subtitle">
                            <div class="staff-eval-sub-stats">
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Oyun Görüşü</span>
                                    <input id="visionInput" type="range" class="staff-eval-stat-slider passing-input"
                                           min="0" max="100"
                                           value="84">
                                    <span class="staff-eval-slider-value">84</span>
                                </div>
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Kısa Pas</span>
                                    <input id="shortPassInput" type="range" class="staff-eval-stat-slider passing-input"
                                           min="0" max="100"
                                           value="85">
                                    <span class="staff-eval-slider-value">85</span>
                                </div>
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Uzun Pas</span>
                                    <input id="longPassInput" type="range" class="staff-eval-stat-slider passing-input"
                                           min="0" max="100"
                                           value="78">
                                    <span class="staff-eval-slider-value">78</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="staff-eval-stat-item">
                        <div class="staff-eval-stat-title">Dribbling</div>
                        <div class="staff-eval-stat-value dribbling-stat">88</div>
                        <div class="staff-eval-stat-subtitle">
                            <div class="staff-eval-sub-stats">
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Çeviklik</span>
                                    <input id="agilityInput" type="range" class="staff-eval-stat-slider dribbling-input"
                                           min="0" max="100"
                                           value="89">
                                    <span class="staff-eval-slider-value">89</span>
                                </div>
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Top Kontrolü</span>
                                    <input id="ballControlInput" type="range"
                                           class="staff-eval-stat-slider dribbling-input" min="0" max="100"
                                           value="87">
                                    <span class="staff-eval-slider-value">87</span>
                                </div>
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Dribbling</span>
                                    <input id="dribbleInput" type="range"
                                           class="staff-eval-stat-slider dribbling-input" min="0" max="100"
                                           value="86">
                                    <span class="staff-eval-slider-value">86</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="staff-eval-stat-item">
                        <div class="staff-eval-stat-title">Defans</div>
                        <div class="staff-eval-stat-value defense-stat">75</div>
                        <div class="staff-eval-stat-subtitle">
                            <div class="staff-eval-sub-stats">
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Defansif Farkındalık</span>
                                    <input id="defAwarenessInput" type="range"
                                           class="staff-eval-stat-slider defense-input" min="0" max="100"
                                           value="74">
                                    <span class="staff-eval-slider-value">74</span>
                                </div>
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Müdahale</span>
                                    <input id="interceptionsInput" type="range"
                                           class="staff-eval-stat-slider defense-input" min="0" max="100"
                                           value="77">
                                    <span class="staff-eval-slider-value">77</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="staff-eval-stat-item">
                        <div class="staff-eval-stat-title">Fizik</div>
                        <div class="staff-eval-stat-value physical-stat">80</div>
                        <div class="staff-eval-stat-subtitle">
                            <div class="staff-eval-sub-stats">
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Dayanıklılık</span>
                                    <input id="staminaInput" type="range" class="staff-eval-stat-slider physical-input" min="0" max="100"
                                           value="78">
                                    <span class="staff-eval-slider-value">78</span>
                                </div>
                                <div class="staff-eval-sub-stat">
                                    <span class="staff-eval-sub-stat-name">Güç</span>
                                    <input id="strengthInput" type="range" class="staff-eval-stat-slider physical-input" min="0" max="100"
                                           value="82">
                                    <span class="staff-eval-slider-value">82</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button class="submit-evaluation-button" onclick="submitEvaluation(this)">Değerlendirmeyi Gönder</button>
        </div>
    </div>
    {% csrf_token %}
{% endblock %}
{% block extraJS %}
    <script src="{% static 'js/reservation/reservations.js' %}"></script>
{% endblock %}